package com.nms.util;import java.awt.*;import java.awt.image.BufferedImage;import java.util.Random;/** * Generator random code *  * @author sam */public final class RCI{		public static final String RANDOMCODEKEY = "PBN_RCI_KEY";	private Random random = new Random();	private String randString = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";// random																		// str		private int width = 80;	private int height = 26;	private int lineCount = 40;	private int stringNum = 4;	private int codeX = width / (stringNum + 1);	private int codeY = height - 4;	private int fontHeight = height - 2;		/*	 * get font	 */	private Font getFont()	{			return new Font("Fixedsys",Font.CENTER_BASELINE,18);	}		/*	 * get color	 */	private Color getRandColor(int fc,int bc)	{			if(fc > 255)			fc = 255;		if(bc > 255)			bc = 255;		int r = fc + random.nextInt(bc - fc - 16);		int g = fc + random.nextInt(bc - fc - 14);		int b = fc + random.nextInt(bc - fc - 18);		return new Color(r,g,b);	}		/**	 * generator randome code image	 */	public CKeyValuePair<String,BufferedImage> getRandcode()	{			CKeyValuePair<String,BufferedImage> resualt = null;		BufferedImage image = new BufferedImage(width,height,BufferedImage.TYPE_INT_BGR);		Graphics g = image.getGraphics();		g.fillRect(0,0,width,height);		g.setFont(new Font("Times New Roman",Font.ROMAN_BASELINE,fontHeight));		g.setColor(getRandColor(110,133));		for(int i = 0;i <= lineCount;i++)		{			drowLine(g);		}		StringBuilder randomString = new StringBuilder();		for(int i = 1;i <= stringNum;i++)		{			drowString(g,randomString,i);		}		g.dispose();		resualt = new CKeyValuePair<String,BufferedImage>(randomString.toString(),image);		return resualt;	}		/*	 * draw text	 */	private void drowString(Graphics g,StringBuilder randomString,int i)	{			g.setFont(getFont());		g.setColor(new Color(random.nextInt(101),random.nextInt(111),random.nextInt(121)));		String rand = String.valueOf(getRandomString(random.nextInt(randString.length())));		randomString.append(rand);		g.translate(random.nextInt(3),random.nextInt(3));		g.drawString(rand,13 * i,16);	}		/*	 * 	 */	private void drowLine(Graphics g)	{			int x = random.nextInt(width);		int y = random.nextInt(height);		int xl = random.nextInt(13);		int yl = random.nextInt(15);		g.drawLine(x,y,x + xl,y + yl);	}		/*	 * get random code	 */	public String getRandomString(int num)	{			return String.valueOf(randString.charAt(num));	}}